import{j as e,F as f,b as N,h as v,a as w,r,c as p,k as g,W as D,d as b,Q as k}from"./index-1e967f69.js";import{f as S,n as y}from"./newsDefault-54757a19.js";function I({resp:a}){const s=v.newsDet;return e.jsx("section",{id:"hero-sec",children:e.jsxs("div",{className:"container separator",children:[e.jsx("h1",{className:"panchang",children:a.title}),e.jsx("div",{className:"flake dark",children:e.jsx(f,{})}),e.jsx("p",{children:s.heroDescr}),e.jsx("button",{type:"button",className:"btn btn-circle",children:e.jsx("img",{src:N,alt:"Contact us"})})]})})}function M(){const{hash:a}=w(),[s,i]=r.useState({}),[x,c]=r.useState(!0),o=r.useRef(0),[l,u]=r.useState([{},{}]);r.useEffect(()=>{try{fetch("./pubdata/newsDetMockedData.json").then(t=>t.json()).then(t=>{u(t)})}catch(t){console.log(t)}},[]);const j=Math.floor(Math.random()*l.length),d=l[j];async function m(){if(o.current!==0)return!1;o.current++;const t=localStorage.getItem(a);if(t!==null)return i(JSON.parse(t)),c(!1),!1;console.log("hash",a);try{const n=atob(a),h=await g(`${D}/extract-news?api-key=${b}&url=${n}`).json();i(h),localStorage.setItem(a,JSON.stringify(h)),c(!1)}catch(n){console.log(n),k.error("Some error occured"),c(!1)}}return r.useEffect(()=>{m()},[]),x?e.jsx(p,{}):e.jsxs("div",{id:"news-details-page",children:[e.jsx(I,{resp:s}),e.jsx("div",{id:"detail-overview-sec",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"detail-overview-wrap1",children:[e.jsxs("div",{className:"author",children:[e.jsx("div",{className:"pic-wrap",children:e.jsx("img",{src:d.authImg,alt:s.author})}),e.jsxs("div",{className:"text",children:[e.jsx("div",{children:s.author}),e.jsx("div",{children:d.authPosition})]})]}),e.jsx("div",{className:"overview panchang",children:"Overview"}),e.jsx("div",{className:"date-news",children:S(s.publish_date)})]})})}),e.jsx("section",{id:"detail-text-sec",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"detail-text-wrap",children:e.jsxs("div",{className:"text-col",children:[e.jsx("div",{className:"poster-detail-wrap",children:e.jsx("img",{src:s.image?s.image:y})}),e.jsx("p",{children:s.text})]})})})})]})}export{M as default};
