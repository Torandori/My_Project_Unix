import{r as n,j as e,L as j,S as u,N as k,k as L,W as b,c as I,Q as M,H as T,h as E}from"./index-537a7554.js";import{f,n as m,L as y}from"./Loader-e1401075.js";import"./index.es-72d1dd91.js";function D({item:s}){const c=btoa(s.url),[r,i]=n.useState([{},{}]);n.useEffect(()=>{try{fetch("./pubdata/newsDetMockedData.json").then(o=>o.json()).then(o=>{i(o),console.log(o)})}catch(o){console.log(o)}},[]);const d=Math.floor(Math.random()*r.length),a=r[d];return e.jsx("li",{children:e.jsxs("div",{className:"news-list-item",children:[e.jsxs("div",{className:"author",children:[e.jsx("div",{className:"pic-wrap",children:e.jsx("img",{src:a.authImg,alt:a.author})}),e.jsxs("div",{className:"text",children:[e.jsx("div",{children:s.author}),e.jsx("div",{children:a.authPosition})]})]}),e.jsx("div",{className:"restTopic",children:e.jsx(j,{to:`/news/${c}`,state:{newsData:s},className:"new-topic",title:"Go to news details",children:s.title})}),e.jsx("div",{className:"date-news",children:f(s.publish_date)}),e.jsx("div",{className:"poster-wrap",children:e.jsx("img",{src:s.image??m,alt:s.title})})]})})}function _({respData:s,randomIt:c}){const r=btoa(s.url),[i,d]=n.useState([{},{}]);n.useEffect(()=>{try{fetch("./pubdata/newsDetMockedData.json").then(l=>l.json()).then(l=>{d(l),console.log(l)})}catch(l){console.log(l)}},[]);const a=Math.floor(Math.random()*i.length),o=i[a];return console.log("return",r),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"content-wrap-first",children:[e.jsxs("div",{className:"author",children:[e.jsx("div",{className:"pic-wrap",children:e.jsx("img",{src:o.authImg,alt:s.author})}),e.jsxs("div",{className:"text",children:[e.jsx("div",{children:s.author}),e.jsx("div",{children:o.authPosition})]})]}),e.jsx(j,{to:`/news/${r}`,className:"new-topic",title:"Go to news details",children:s.title})]}),e.jsxs("div",{className:"content-wrap2",children:[e.jsx("div",{className:"new panchang",children:`new/${c.newNum}`}),e.jsx("div",{className:"date-news",children:f(s.publish_date)})]}),e.jsx("div",{className:"img-wrap-new",children:e.jsx("img",{src:s.image??m,alt:s.title})})]})}function x(){return e.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{opacity:"0.3",width:"60",height:"60",rx:"30",transform:"matrix(-1 0 0 1 60 0)",fill:"#F5F5F5"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.3497 29.183L30.2997 21.07L29.2857 20L19.5537 29.933L29.2857 39.866L30.2997 38.797L22.3497 30.683L38.9997 30.683L38.9997 29.183L22.3497 29.183Z",fill:"#121212"})]})}function P(){const[s,c]=n.useState([]),[r,i]=n.useState(!0),d=n.useRef(0),a=n.useRef(),[o,l]=n.useState([{},{}]);n.useEffect(()=>{try{fetch("./pubdata/newsDetMockedData.json").then(t=>t.json()).then(t=>{l(t),console.log(t)})}catch(t){console.log(t)}},[]);async function N(){if(d.current!==0)return!1;d.current++;const t=localStorage.getItem("newsLine"),w=+localStorage.getItem("LastNewsUpdate");if(t!==null&&new Date().getTime()-w<k)return c(JSON.parse(t)),i(!1),!1;try{const h=await L(`${b}search-news?api-key=${I}&text=design&language=en&number=6`).json();console.log("resp",h),c(h.news),localStorage.setItem("newsLine",JSON.stringify(h.news)),localStorage.setItem("lastNewsUpdate",new Date().getTime()),i(!1)}catch(h){console.log(h),M.error("Some error occured"),i(!1)}}if(n.useEffect(()=>{console.log("newsLine in useEffect:",s),N()},[]),r)return e.jsx(y,{});const g={dots:!1,infinite:!0,speed:300,slidesToShow:1,slidesToScroll:1,arrows:!1},p={dots:!1,infinite:!0,speed:300,slidesToShow:3,slidesToScroll:1,arrows:!1,responsive:[{breakpoint:1360,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]};function v(){a.current.slickPrev()}function S(){a.current.slickNext()}return e.jsxs("div",{className:"news-slider",children:[e.jsxs("div",{className:"newSlider",children:[e.jsxs("div",{className:"prev-next-arrows",children:[e.jsx("button",{type:"button",className:"prev",onClick:v,children:e.jsx(x,{})}),e.jsx("button",{className:"next",onClick:S,children:e.jsx(x,{})})]}),e.jsx(u,{...g,ref:a,children:s.map((t,w)=>e.jsx(_,{respData:t,randomIt:o[w]},t.id))})]}),e.jsx("div",{className:"news-line",children:e.jsx("ul",{className:"news-list",children:e.jsx(u,{...p,children:s.map(t=>e.jsx(D,{item:t},t.id))})})})]})}function R(){return e.jsx("section",{id:"slider-news-sec",children:e.jsx("div",{className:"container",children:e.jsx(P,{})})})}function A(){n.useEffect(()=>{window.document.title="Unix News"},[]);const s=E.news;return e.jsxs("div",{id:"news-page",children:[e.jsx(T,{par:s}),e.jsx(R,{})]})}export{A as default};
