import{a as n,j as e,b as u,L as N,f as g,n as p,r as I,P as y,d as M,N as T,k as E,Q as P}from"./index-ff2de014.js";import{S as f}from"./slick-b5898d78.js";function _({respData:s}){const o=btoa(s.url);console.log("hashNewItem",o);const[c,d]=n.useState([{},{}]);n.useEffect(()=>{try{fetch("./pubdata/newsDetMockedData.json").then(a=>a.json()).then(a=>{d(a),console.log("respNewsItem",a)})}catch(a){console.log("err",a)}},[]);const i=Math.floor(Math.random()*c.length),l=c[i];return e.jsxs("div",{className:"news-list-item",children:[e.jsxs("div",{className:"author",children:[e.jsx("div",{className:"pic-wrap",children:e.jsx(u.LazyLoadImage,{src:l.authImg,alt:"Picture of "+l.authPosition,effect:"blur"})}),e.jsxs("div",{className:"text",children:[e.jsx("div",{children:s.author}),e.jsx("div",{children:l.authPosition})]})]}),e.jsx("div",{className:"restTopic",children:e.jsx(N,{to:`/news/${o}`,state:{newsData:s},className:"new-topic",title:"Go to news details",children:s.title})}),e.jsx("div",{className:"date-news",children:g(s.publish_date)}),e.jsx("div",{className:"poster-wrap card-hover",children:e.jsx(u.LazyLoadImage,{src:s.image??p,alt:s.title,effect:"blur"})})]})}function R({respData:s,randomIt:o}){const c=I.useMediaQuery({maxWidth:880}),d=btoa(s.url);console.log("respData",s);const[i,l]=n.useState([{},{}]);n.useEffect(()=>{try{fetch("./pubdata/newsDetMockedData.json").then(r=>r.json()).then(r=>{l(r),console.log("resp",r)})}catch(r){console.log(r)}},[]);const a=Math.floor(Math.random()*i.length),h=i[a];return console.log("hashNewIt",d),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"content-wrap-first",children:[e.jsxs("div",{className:"author",children:[e.jsx("div",{className:"pic-wrap",children:e.jsx(u.LazyLoadImage,{src:h.authImg,alt:s.author,effect:"blur"})}),e.jsxs("div",{className:"text",children:[e.jsx("div",{children:s.author}),e.jsx("div",{children:h.authPosition})]})]}),e.jsx(N,{to:`/news/${d}`,state:{newsData:s},className:"new-topic",title:"Go to news details",children:s.title})]}),e.jsxs("div",{className:"content-wrap2",children:[c?e.jsx("div",{className:"new panchang",children:`new/${o.newNum}`}):e.jsx(y,{translateX:["-10px","70px"],children:e.jsx("div",{className:"new panchang",children:`new/${o.newNum}`})}),e.jsx("div",{className:"date-news",children:g(s.publish_date)})]}),e.jsx("div",{className:"img-wrap-new",children:e.jsx(u.LazyLoadImage,{src:s.image??p,alt:s.title,effect:"blur"})})]})}function j(){return e.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{opacity:"0.3",width:"60",height:"60",rx:"30",transform:"matrix(-1 0 0 1 60 0)",fill:"#F5F5F5"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.3497 29.183L30.2997 21.07L29.2857 20L19.5537 29.933L29.2857 39.866L30.2997 38.797L22.3497 30.683L38.9997 30.683L38.9997 29.183L22.3497 29.183Z",fill:"#121212"})]})}function W(){const[o,c]=n.useState([]),[d,i]=n.useState(!0),l=n.useRef(0),a=n.useRef(),[h,r]=n.useState([{},{}]);n.useEffect(()=>{try{fetch("./pubdata/newsDetMockedData.json").then(t=>t.json()).then(t=>{r(t),console.log("respPosition",t)})}catch(t){console.log("err",t)}},[]);async function v(){if(l.current!==0)return!1;l.current++;const t=localStorage.getItem("newsLine"),w=+localStorage.getItem("LastNewsUpdate");if(t!==null&&new Date().getTime()-w<T)return c(JSON.parse(t)),i(!1),!1;try{const m=await E("./mock/mockNews.json",{timeout:15e3}).json();console.log("respNewsLine",m),c(m.news),localStorage.setItem("newsLine",JSON.stringify(m.news)),localStorage.setItem("lastNewsUpdate",new Date().getTime()),i(!1)}catch(x){console.log("err",x),P.error("Some error occured"),i(!1)}}if(n.useEffect(()=>{v()},[]),d)return e.jsx(M,{});const S={dots:!1,infinite:!0,speed:300,slidesToShow:1,slidesToScroll:1,lazyLoad:!0,arrows:!1},L={dots:!1,infinite:!0,speed:300,slidesToShow:3,slidesToScroll:1,lazyLoad:!0,arrows:!1,responsive:[{breakpoint:1360,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:800,settings:{slidesToShow:1,slidesToScroll:1}}]};function b(){a.current.slickPrev()}function k(){a.current.slickNext()}return e.jsxs("div",{className:"news-slider",children:[e.jsxs("div",{className:"newSlider","data-aos":"fade-right","data-aos-easing":"ease-out-cubic","data-aos-duration":"500",children:[e.jsxs("div",{className:"prev-next-arrows",children:[e.jsx("button",{type:"button",className:"prev",onClick:b,"aria-label":"Previous slide",children:e.jsx(j,{})}),e.jsx("button",{type:"button",className:"next",onClick:k,"aria-label":"Next slide",children:e.jsx(j,{})})]}),e.jsx(f,{...S,ref:a,children:o.map((t,w)=>e.jsx(R,{respData:t,randomIt:h[w]},t.id))})]}),e.jsx("div",{className:"news-line","data-aos":"fade-left","data-aos-easing":"ease-out-cubic","data-aos-duration":"500",children:e.jsx("div",{className:"news-list",children:e.jsx(f,{...L,children:o.map(t=>e.jsx(_,{respData:t},t.id))})})})]})}function F(){return e.jsx("section",{id:"slider-news-sec",children:e.jsx("div",{className:"container",children:e.jsx(W,{})})})}export{F as default};
